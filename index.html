<!DOCTYPE html>
<html>
  <head>
    <title>My Favorite Museums in New York</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        bottom: 0%;
        height: 100%;
        left: 362px;
        position: absolute;
        right: 0px;

      }
      #options-box {
        height:90%;
        width: 340px;
        background-color: #fff;
        padding: 10px 10px 30px 10px;
        border: 1px solid #999;
        text-align: left;
        font-family: 'Roboto','sans-serif';
        line-height: 35px;
      }
    </style>
</head>
  <body>
    <div class="container">
      <div class="options-box">
      <h1>Best Art Museums in New York City</h1>
      <div>
        <input id="show-listings" type="button" VALUE="Show Listings">
        <input id="hide-listings" type="button" VALUE="Hide Listings">
      </div>
    </div>
    <div id="map"></div>
    </div>


    <script>

    //A new blank erray for all the listing markers
    var markers = [];
    var locations = [
          {title: 'Museum of Modern Art', location: {lat: 40.7614327, lng: -73.9776216,}},
          {title: 'Metropolitan Museum of Art', location: {lat: 40.7794366, lng: -73.963244,}},
          {title: 'New Museum', location: {lat: 40.7223376, lng: -73.9928905,}},
          {title: 'Solomon R. Guggenheim Museum', location: {lat: 40.7829796, lng: -73.9589706,}},
          {title: 'Whitney Museum of American Art', location: {lat: 40.7395877, lng: -74.0088629,}},
        ];
      var map;
      function initMap() {
        // Constructor creates a new map -- only center and zoom are required
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 40.674, lng: -73.945},
          zoom: 12,
          styles: [
    {
        "featureType": "landscape",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "lightness": 65
            },
            {
                "visibility": "on"
            }
        ]
    },
    {
        "featureType": "poi",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "lightness": 51
            },
            {
                "visibility": "simplified"
            }
        ]
    },
    {
        "featureType": "road.highway",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "visibility": "simplified"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "lightness": 30
            },
            {
                "visibility": "on"
            }
        ]
    },
    {
        "featureType": "road.local",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "lightness": 40
            },
            {
                "visibility": "on"
            }
        ]
    },
    {
        "featureType": "transit",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "visibility": "simplified"
            }
        ]
    },
    {
        "featureType": "administrative.province",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "lightness": -25
            },
            {
                "saturation": -100
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "geometry",
        "stylers": [
            {
                "hue": "#ffff00"
            },
            {
                "lightness": -25
            },
            {
                "saturation": -97
            }
        ]
    }
]
        });
        // My farovite museums in New York. If there were more, I should have them in a dabatase
        var largeInfowindow = new google.maps.InfoWindow();
        // this is to extend the map boundry in case the marker hits outside of map boundry
        var bounds = new google.maps.LatLngBounds();

        //The following group uses the location array to create an array of makers on initialize

        for (var i = 0; i < locations.length; i++){
        //Get the position from the location array
        var position = locations[i].location;
        var title = locations[i].title;
        //Create a marker per location, and put into markers array
        var marker = new google.maps.Marker({
            map: map,
            position: position,
            title: title,
            animation: google.maps.Animation.DROP,
            id: i
        });
        //Push the marker to our array of markers
        markers.push(marker);
        //Extend the boundaries of the map for each marker
        bounds.extend(marker.position);
        //Create an onclick event to open an infowindow at each marker
        marker.addListener('click', function() {
            populateInfoWindow(this, largeInfowindow);
        });
        }
        //Here are event listeners for the  show and hide buttons
        document.getElementById('show-listings').addEventListener('click', showListings);
        document.getElementById('hide-listings').addEventListener('click', hideListings);
      }


        // This function populates the infowindo when the marker is clicked.
        // There will be only one infowindow opening at the  marker when the marker is clicked.
        function populateInfoWindow(marker, infowindow) {
            //check to make sure the infowindow is not already opened on this marker
            if (infowindow.marker = marker) {
                infowindow.marker = marker;
                infowindow.setContent('<div>' + marker.title + '</div>');
                infowindow.open(map, marker);
                //Makre sure the marker property is cleared if the infowindow is closed
                infowindow.addListener('closeclick',function(){
                    infowindow.setMarker(null);
                });
            }
        }
      //This funciton will loop through the markers array and display them all
      function showListings() {
        var bounds = new google.maps.LatLngBounds();
        //Extend the boundaries of the map for each marker and display the marker
        for (var i = 0; i < markers.length; i++){
        markers[i].setMap(map);
        bounds.extend(markers[i].position);
      }
      map.fitBounds(bounds);
    }
         //This funciton will loop through the listings and hide them all
      function hideListings() {
        for (var i = 0; i < markers.length; i++){
        markers[i].setMap(null);
      }
    }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyAVtGARqSd-A8jJXiWRsBXfSmCx6HE8s0c&callback=initMap" async defer></script>

  </body>
</html>